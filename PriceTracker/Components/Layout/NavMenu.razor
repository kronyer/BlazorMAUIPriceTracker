@using PriceTracker.Components.Pages.States
@using PriceTracker.DTO
@using PriceTracker.Interfaces
@using PriceTracker.Models
@using ZXingBlazor.Components
@inject IProductRepository produtoRepository
@inject IProductVariationRepository produtoVariacaoRepository
@inject NavigationManager NavigationManager
@inject BarcodeState BarcodeState

<div class="nav-absolute">
    <nav class="nav-container">
        <NavLink ActiveClass="nav-active" class="nav-btn" href="/" Match="NavLinkMatch.All">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                <path d="M35.4137 22.5852L25.4137 12.5853C25.0387 12.2105 24.5302 12 24 12C23.4698 12 22.9613 12.2105 22.5863 12.5853L12.5863 22.5852C12.3996 22.7704 12.2517 22.9909 12.1511 23.2338C12.0504 23.4767 11.9991 23.7372 12 24.0002V36C12 36.2652 12.1054 36.5196 12.2929 36.7071C12.4804 36.8946 12.7348 37 13 37H21C21.2652 37 21.5196 36.8946 21.7071 36.7071C21.8946 36.5196 22 36.2652 22 36V29.0001H26V36C26 36.2652 26.1054 36.5196 26.2929 36.7071C26.4804 36.8946 26.7348 37 27 37H35C35.2652 37 35.5196 36.8946 35.7071 36.7071C35.8946 36.5196 36 36.2652 36 36V24.0002C36.0009 23.7372 35.9496 23.4767 35.8489 23.2338C35.7483 22.9909 35.6004 22.7704 35.4137 22.5852ZM34 35H28V28.0001C28 27.7349 27.8946 27.4806 27.7071 27.293C27.5196 27.1055 27.2652 27.0001 27 27.0001H21C20.7348 27.0001 20.4804 27.1055 20.2929 27.293C20.1054 27.4806 20 27.7349 20 28.0001V35H14V24.0002L24 14.0003L34 24.0002V35Z" fill="#E9F0F5" />
            </svg>
        </NavLink>

        <NavLink ActiveClass="nav-active" class="nav-btn" href="lista">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                <path d="M29.4545 24.037C29.4545 24.3219 29.3396 24.5951 29.135 24.7965C28.9304 24.998 28.653 25.1111 28.3636 25.1111H19.6364C19.347 25.1111 19.0696 24.998 18.865 24.7965C18.6604 24.5951 18.5455 24.3219 18.5455 24.037C18.5455 23.7522 18.6604 23.479 18.865 23.2776C19.0696 23.0761 19.347 22.963 19.6364 22.963H28.3636C28.653 22.963 28.9304 23.0761 29.135 23.2776C29.3396 23.479 29.4545 23.7522 29.4545 24.037ZM28.3636 27.2593H19.6364C19.347 27.2593 19.0696 27.3724 18.865 27.5738C18.6604 27.7753 18.5455 28.0485 18.5455 28.3333C18.5455 28.6182 18.6604 28.8914 18.865 29.0928C19.0696 29.2942 19.347 29.4074 19.6364 29.4074H28.3636C28.653 29.4074 28.9304 29.2942 29.135 29.0928C29.3396 28.8914 29.4545 28.6182 29.4545 28.3333C29.4545 28.0485 29.3396 27.7753 29.135 27.5738C28.9304 27.3724 28.653 27.2593 28.3636 27.2593ZM36 12.2222V33.7037C36 34.8432 35.5403 35.9359 34.7219 36.7416C33.9036 37.5474 32.7937 38 31.6364 38H16.3636C15.2063 38 14.0964 37.5474 13.2781 36.7416C12.4597 35.9359 12 34.8432 12 33.7037V12.2222C12 11.9374 12.1149 11.6642 12.3195 11.4627C12.5241 11.2613 12.8016 11.1481 13.0909 11.1481H16.3636V10.0741C16.3636 9.78921 16.4786 9.51602 16.6832 9.31459C16.8877 9.11316 17.1652 9 17.4545 9C17.7439 9 18.0213 9.11316 18.2259 9.31459C18.4305 9.51602 18.5455 9.78921 18.5455 10.0741V11.1481H22.9091V10.0741C22.9091 9.78921 23.024 9.51602 23.2286 9.31459C23.4332 9.11316 23.7107 9 24 9C24.2893 9 24.5668 9.11316 24.7714 9.31459C24.976 9.51602 25.0909 9.78921 25.0909 10.0741V11.1481H29.4545V10.0741C29.4545 9.78921 29.5695 9.51602 29.7741 9.31459C29.9787 9.11316 30.2561 9 30.5455 9C30.8348 9 31.1123 9.11316 31.3168 9.31459C31.5214 9.51602 31.6364 9.78921 31.6364 10.0741V11.1481H34.9091C35.1984 11.1481 35.4759 11.2613 35.6805 11.4627C35.8851 11.6642 36 11.9374 36 12.2222ZM33.8182 13.2963H31.6364V14.3704C31.6364 14.6552 31.5214 14.9284 31.3168 15.1299C31.1123 15.3313 30.8348 15.4444 30.5455 15.4444C30.2561 15.4444 29.9787 15.3313 29.7741 15.1299C29.5695 14.9284 29.4545 14.6552 29.4545 14.3704V13.2963H25.0909V14.3704C25.0909 14.6552 24.976 14.9284 24.7714 15.1299C24.5668 15.3313 24.2893 15.4444 24 15.4444C23.7107 15.4444 23.4332 15.3313 23.2286 15.1299C23.024 14.9284 22.9091 14.6552 22.9091 14.3704V13.2963H18.5455V14.3704C18.5455 14.6552 18.4305 14.9284 18.2259 15.1299C18.0213 15.3313 17.7439 15.4444 17.4545 15.4444C17.1652 15.4444 16.8877 15.3313 16.6832 15.1299C16.4786 14.9284 16.3636 14.6552 16.3636 14.3704V13.2963H14.1818V33.7037C14.1818 34.2734 14.4117 34.8198 14.8209 35.2227C15.23 35.6255 15.785 35.8519 16.3636 35.8519H31.6364C32.215 35.8519 32.77 35.6255 33.1791 35.2227C33.5883 34.8198 33.8182 34.2734 33.8182 33.7037V13.2963Z" fill="#E9F0F5" />
            </svg>
        </NavLink>

        <button @onclick="ScanBarcode" class="nav-main-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
                <path d="M35 20C35 20.3315 34.8683 20.6495 34.6339 20.8839C34.3995 21.1183 34.0815 21.25 33.75 21.25H21.25V33.75C21.25 34.0815 21.1183 34.3995 20.8839 34.6339C20.6495 34.8683 20.3315 35 20 35C19.6685 35 19.3505 34.8683 19.1161 34.6339C18.8817 34.3995 18.75 34.0815 18.75 33.75V21.25H6.25C5.91848 21.25 5.60054 21.1183 5.36612 20.8839C5.1317 20.6495 5 20.3315 5 20C5 19.6685 5.1317 19.3505 5.36612 19.1161C5.60054 18.8817 5.91848 18.75 6.25 18.75H18.75V6.25C18.75 5.91848 18.8817 5.60054 19.1161 5.36612C19.3505 5.1317 19.6685 5 20 5C20.3315 5 20.6495 5.1317 20.8839 5.36612C21.1183 5.60054 21.25 5.91848 21.25 6.25V18.75H33.75C34.0815 18.75 34.3995 18.8817 34.6339 19.1161C34.8683 19.3505 35 19.6685 35 20Z" fill="#E9F0F5" />
            </svg>
        </button>

        <NavLink ActiveClass="nav-active" class="nav-btn" href="cadastros">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                <path d="M19 16C19 15.7348 19.1054 15.4804 19.2929 15.2929C19.4804 15.1054 19.7348 15 20 15H35C35.2652 15 35.5196 15.1054 35.7071 15.2929C35.8946 15.4804 36 15.7348 36 16C36 16.2652 35.8946 16.5196 35.7071 16.7071C35.5196 16.8946 35.2652 17 35 17H20C19.7348 17 19.4804 16.8946 19.2929 16.7071C19.1054 16.5196 19 16.2652 19 16ZM35 23H20C19.7348 23 19.4804 23.1054 19.2929 23.2929C19.1054 23.4804 19 23.7348 19 24C19 24.2652 19.1054 24.5196 19.2929 24.7071C19.4804 24.8946 19.7348 25 20 25H35C35.2652 25 35.5196 24.8946 35.7071 24.7071C35.8946 24.5196 36 24.2652 36 24C36 23.7348 35.8946 23.4804 35.7071 23.2929C35.5196 23.1054 35.2652 23 35 23ZM35 31H20C19.7348 31 19.4804 31.1054 19.2929 31.2929C19.1054 31.4804 19 31.7348 19 32C19 32.2652 19.1054 32.5196 19.2929 32.7071C19.4804 32.8946 19.7348 33 20 33H35C35.2652 33 35.5196 32.8946 35.7071 32.7071C35.8946 32.5196 36 32.2652 36 32C36 31.7348 35.8946 31.4804 35.7071 31.2929C35.5196 31.1054 35.2652 31 35 31ZM15 15H13C12.7348 15 12.4804 15.1054 12.2929 15.2929C12.1054 15.4804 12 15.7348 12 16C12 16.2652 12.1054 16.5196 12.2929 16.7071C12.4804 16.8946 12.7348 17 13 17H15C15.2652 17 15.5196 16.8946 15.7071 16.7071C15.8946 16.5196 16 16.2652 16 16C16 15.7348 15.8946 15.4804 15.7071 15.2929C15.5196 15.1054 15.2652 15 15 15ZM15 23H13C12.7348 23 12.4804 23.1054 12.2929 23.2929C12.1054 23.4804 12 23.7348 12 24C12 24.2652 12.1054 24.5196 12.2929 24.7071C12.4804 24.8946 12.7348 25 13 25H15C15.2652 25 15.5196 24.8946 15.7071 24.7071C15.8946 24.5196 16 24.2652 16 24C16 23.7348 15.8946 23.4804 15.7071 23.2929C15.5196 23.1054 15.2652 23 15 23ZM15 31H13C12.7348 31 12.4804 31.1054 12.2929 31.2929C12.1054 31.4804 12 31.7348 12 32C12 32.2652 12.1054 32.5196 12.2929 32.7071C12.4804 32.8946 12.7348 33 13 33H15C15.2652 33 15.5196 32.8946 15.7071 32.7071C15.8946 32.5196 16 32.2652 16 32C16 31.7348 15.8946 31.4804 15.7071 31.2929C15.5196 31.1054 15.2652 31 15 31Z" fill="#E9F0F5" />
            </svg>
        </NavLink>

        <NavLink ActiveClass="nav-active" href="about" class="nav-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
                <path d="M24 11C21.6266 11 19.3066 11.7331 17.3332 13.1066C15.3598 14.4801 13.8217 16.4324 12.9135 18.7165C12.0052 21.0005 11.7676 23.5139 12.2306 25.9386C12.6936 28.3634 13.8365 30.5907 15.5147 32.3388C17.193 34.087 19.3311 35.2775 21.6589 35.7598C23.9867 36.2421 26.3995 35.9946 28.5922 35.0485C30.7849 34.1024 32.6591 32.5002 33.9776 30.4446C35.2962 28.389 36 25.9723 36 23.5C35.9966 20.1859 34.7313 17.0085 32.4816 14.665C30.2319 12.3216 27.1816 11.0035 24 11ZM24 34.0769C21.9918 34.0769 20.0286 33.4566 18.3588 32.2944C16.689 31.1322 15.3876 29.4803 14.6191 27.5476C13.8506 25.6149 13.6495 23.4883 14.0413 21.4365C14.4331 19.3848 15.4001 17.5002 16.8202 16.021C18.2402 14.5418 20.0494 13.5344 22.0191 13.1263C23.9887 12.7182 26.0303 12.9277 27.8857 13.7282C29.7411 14.5287 31.3269 15.8844 32.4426 17.6238C33.5583 19.3631 34.1538 21.4081 34.1538 23.5C34.1508 26.3042 33.08 28.9926 31.1765 30.9755C29.2729 32.9584 26.692 34.0737 24 34.0769ZM25.8462 29.2692C25.8462 29.5242 25.7489 29.7688 25.5758 29.9491C25.4027 30.1295 25.1679 30.2308 24.9231 30.2308C24.4334 30.2308 23.9639 30.0282 23.6177 29.6675C23.2714 29.3069 23.0769 28.8177 23.0769 28.3077V23.5C22.8321 23.5 22.5973 23.3987 22.4242 23.2184C22.2511 23.038 22.1538 22.7935 22.1538 22.5385C22.1538 22.2834 22.2511 22.0389 22.4242 21.8585C22.5973 21.6782 22.8321 21.5769 23.0769 21.5769C23.5666 21.5769 24.0361 21.7795 24.3824 22.1402C24.7286 22.5008 24.9231 22.99 24.9231 23.5V28.3077C25.1679 28.3077 25.4027 28.409 25.5758 28.5893C25.7489 28.7696 25.8462 29.0142 25.8462 29.2692ZM22.1538 18.2115C22.1538 17.9263 22.2351 17.6474 22.3872 17.4102C22.5393 17.173 22.7556 16.9882 23.0086 16.879C23.2616 16.7699 23.54 16.7413 23.8086 16.7969C24.0772 16.8526 24.3239 16.99 24.5175 17.1917C24.7112 17.3934 24.843 17.6504 24.8965 17.9302C24.9499 18.2099 24.9225 18.4999 24.8177 18.7635C24.7129 19.027 24.5354 19.2523 24.3077 19.4108C24.08 19.5693 23.8123 19.6538 23.5385 19.6538C23.1712 19.6538 22.8191 19.5019 22.5594 19.2314C22.2997 18.9609 22.1538 18.5941 22.1538 18.2115Z" fill="#E9F0F5" />
            </svg>
        </NavLink>
    </nav>
</div>

@{
    async Task ScanBarcode()
    {
        var scanner = new ZXing.Mobile.MobileBarcodeScanner();
        var result = await scanner.Scan();
        if (result != null)
        {
            BarcodeState.Barcode = result.Text;
            NavigationManager.NavigateTo("/register-price");
        }
    }
}
